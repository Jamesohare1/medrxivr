<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Building complex search strategies • medrxivr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Building complex search strategies">
<meta property="og:description" content="medrxivr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">medrxivr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/medrxivr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/building-complex-search-strategies.html">Building complex search strategies</a>
    </li>
    <li>
      <a href="../articles/medrxiv-api.html">Interacting with the Cold Spring Harbour Laboratory API</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/medrxivr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="building-complex-search-strategies_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Building complex search strategies</h1>
                        <h4 class="author">Luke A McGuinness</h4>
            
            <h4 class="date">2020-09-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/medrxivr/blob/master/vignettes/building-complex-search-strategies.Rmd"><code>vignettes/building-complex-search-strategies.Rmd</code></a></small>
      <div class="hidden name"><code>building-complex-search-strategies.Rmd</code></div>

    </div>

    
    
<div id="building-your-search-with-boolean-operators" class="section level2">
<h2 class="hasAnchor">
<a href="#building-your-search-with-boolean-operators" class="anchor"></a>Building your search with Boolean operators</h2>
<p>First load the <code>medrxivr</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://docs.ropensci.org/medrxivr">medrxivr</a></span>)
</pre></div>
<p>To find records that contain any of many terms, pass the terms as a vector to the <code><a href="../reference/mx_search.html">mx_search()</a></code> function, as in the code chunk below. Query terms can include regular expression syntax - see the <a href="#regex">section at the end of this document</a> on common regular expression that may be useful when searching.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">myquery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dementia"</span>,<span class="st">"vascular"</span>,<span class="st">"alzheimer's"</span>) <span class="co"># Combined with Boolean OR</span>

<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),     <span class="co"># Use daily snapshot for data</span>
                        query = <span class="kw">myquery</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 708 record(s) matching your search.</span>
</pre></div>
<p>To find records relevant to more than one topic domain, create a vector for each topic (note: there is no upper limit on the number of topics your can have) and combine these vectors into a list which is then passed to the <code><a href="../reference/mx_search.html">mx_search()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">topic1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dementia"</span>,<span class="st">"vascular"</span>,<span class="st">"alzheimer's"</span>)  <span class="co"># Combined with Boolean OR</span>
<span class="kw">topic2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"lipids"</span>,<span class="st">"statins"</span>,<span class="st">"cholesterol"</span>)     <span class="co"># Combined with Boolean OR</span>
<span class="kw">myquery</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">topic1</span>, <span class="kw">topic2</span>)                    <span class="co"># Combined with Boolean AND</span>

<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="kw">myquery</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 42 record(s) matching your search.</span>
</pre></div>
</div>
<div id="additional-filters-and-options" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-filters-and-options" class="anchor"></a>Additional filters and options</h2>
<div id="limit-search-by-field" class="section level3">
<h3 class="hasAnchor">
<a href="#limit-search-by-field" class="anchor"></a>Limit search by field</h3>
<p>By default, a range of fields (title, abstract, first author, subject, link (which contains DOI)) are searched, but you can limit the search to a subset of these using the <code>fields</code> argument:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">

<span class="co"># Limit search to title/abstract</span>
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"dementia"</span>,
                        fields = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"title"</span>,<span class="st">"abstract"</span>))
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 116 record(s) matching your search.</span>

<span class="co"># Search by DOI</span>
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"10.1101/2020.01.30.20019836"</span>,
                        fields = <span class="st">"link"</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 1 record(s) matching your search.</span>
</pre></div>
</div>
<div id="exclude-records-containing-certain-terms" class="section level3">
<h3 class="hasAnchor">
<a href="#exclude-records-containing-certain-terms" class="anchor"></a>Exclude records containing certain terms</h3>
<p>Often it is useful to be able to exclude records that contain a certain term that is not relevant to your search. For example, in the search below, we are looking for records related to “dementia” alone by excluding those that mention “mild cognitive impairment”:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"dementia"</span>,
                        NOT = <span class="st">"[Mm]ild cognitive impairment"</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 100 record(s) matching your search.</span>
</pre></div>
</div>
<div id="limit-by-date-posted" class="section level3">
<h3 class="hasAnchor">
<a href="#limit-by-date-posted" class="anchor"></a>Limit by date posted</h3>
<p>You can define either/both of the earliest and latest date you wish to include records from. Note: the search is inclusive of both dates specified:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"dementia"</span>,
                        from_date = <span class="st">"2020-01-01"</span>,      <span class="co"># 1st Jan 2020</span>
                        to_date = <span class="st">"2020-01-08"</span>)        <span class="co"># 8th Jan 2020</span>
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 1 record(s) matching your search.</span>
</pre></div>
</div>
<div id="return-multiple-versions-of-a-record" class="section level3">
<h3 class="hasAnchor">
<a href="#return-multiple-versions-of-a-record" class="anchor"></a>Return multiple versions of a record</h3>
<p><em>medRxiv</em> allows authors to upload a new version of their preprint as often as they like. By default, <code>medrxivr</code> only returns the most recent version of the preprint, but if you are interested in exploring how a record changed over time, you can retrieve all versions of the preprint by setting <code>deduplicate = FALSE</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"10.1101/2020.01.30.20019836"</span>,
                        fields = <span class="st">"link"</span>,
                        deduplicate = <span class="fl">FALSE</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 4 record(s) matching your search.</span>
<span class="co">#&gt; Note, there may be &gt;1 version of the same record.</span>
</pre></div>
</div>
</div>
<div id="regex" class="section level2">
<h2 class="hasAnchor">
<a href="#regex" class="anchor"></a>Useful regular expression (<em>regex</em>) syntax for the systematic reviewer</h2>
<div id="capitalisation" class="section level3">
<h3 class="hasAnchor">
<a href="#capitalisation" class="anchor"></a>Capitalisation</h3>
<p><strong>Example regex:</strong> <code>[Dd]ementia</code><br><strong>Description:</strong> The search is case sensitive, so this syntax allows you to find both <b>D</b>ementia and <b>d</b>ementia using a single term, rather than having to enter them separately.</p>
</div>
<div id="wildcard" class="section level3">
<h3 class="hasAnchor">
<a href="#wildcard" class="anchor"></a>Wildcard</h3>
<p><strong>Example regex:</strong> <code>randomi([[:alpha:]])ation</code><br><strong>Description:</strong> The <code>([[:alpha:]])</code> element defines any single alphanumeric character - in this case, the regex will find both randomi<b>s</b>ation and randomi<b>z</b>ation.</p>
</div>
<div id="near" class="section level3">
<h3 class="hasAnchor">
<a href="#near" class="anchor"></a>NEAR</h3>
<p><strong>Example regex:</strong> <code>systematic(\\s)([[:graph:]]+\\s){0,4}review</code><br><strong>Description:</strong> The <code>(\\s)([[:graph:]]+\\s){0,4}</code> element defines that up to four words can be between <b>systematic</b> and <b>review</b> and the search will still find it. To change how far apart the terms are allowed to be, simply change the second number in the curly brackets (e.g. to find terms that are only one word apart, the syntax would be <code>systematic(\\s)([[:graph:]]+\\s){0,1}review</code>). <strong>Please note that the search is directional, in that the example regex here will find “systematic methods for the review”, but will not find “the review was systematic”.</strong></p>
</div>
<div id="word-limits" class="section level3">
<h3 class="hasAnchor">
<a href="#word-limits" class="anchor"></a>Word limits</h3>
<p><strong>Example regex:</strong> <code>\\bNCOV\\b</code><br><strong>Description:</strong> Sometimes it is useful to be able to define the start and end of terms. For example, if you were searching for NCOV-19, simply using <code>ncov</code> as your search term would also return records containing u<b>ncov</b>ered. Using <code>\\b</code> allows you to define where the term beings and ends, thus excluding false positive matches.</p>
</div>
<div id="example-using-these-regexes" class="section level3">
<h3 class="hasAnchor">
<a href="#example-using-these-regexes" class="anchor"></a>Example using these regexes</h3>
<p>To find records that contain “Mendelian” within 4 words of “randomisation” (with varying capitalisation of “Mendelian” and UK/US spellings of “randomisation”), the following syntax is correct:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">mx_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mx_search.html">mx_search</a></span>(data = <span class="fu"><a href="../reference/mx_snapshot.html">mx_snapshot</a></span>(),
                        query = <span class="st">"[Mm]endelian(\\s)([[:graph:]]+\\s){0,4}randomi([[:alpha:]])ation"</span>)
<span class="co">#&gt; Using medRxiv snapshot - 2020-09-17 00:33</span>
<span class="co">#&gt; Found 128 record(s) matching your search.</span>
</pre></div>
</div>
<div id="regex-tester" class="section level3">
<h3 class="hasAnchor">
<a href="#regex-tester" class="anchor"></a>Regex tester</h3>
<p>To check whether your search term will find what you expect it to, there is a useful <a href="https://spannbaueradam.shinyapps.io/r_regex_tester/">regex tester</a>, designed by <a href="https://adamspannbauer.github.io/2018/01/16/r-regex-tester-shiny-app/">Adam Spannbauer</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Luke McGuinness, Lena Schmidt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
